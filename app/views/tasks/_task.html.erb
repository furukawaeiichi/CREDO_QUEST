<%= turbo_frame_tag task do %>
  <div class="input-group mb-0">
    <%= link_to user_path(task.list.user) do %>
      <img src="<%= task.list.user.image %>" width="50" height="50" style="display: block; margin: auto;">
    <% end %>

    <%= form_with model: task, html: { data: { turbo_frame: task.id } }, class: "input-group-text" do |form| %>
      <%= form.check_box :checked, class: "form-check-input mt-0", onchange: 'this.form.requestSubmit()', aria_label: "Checkbox for following text input", checked: task.checked %>
    <% end %>

    <input type="text" class="form-control" style="overflow: auto; aria-label="Text input with checkbox" value="<%= task.content %>" readonly>

    <% if current_user.already_liked?(task) %>
      <% like = current_user.likes.find_by(task_id: task.id) %>
      <%= button_to task_like_path(task, like), method: :delete, class: "btn btn-primary", style: "height: 50px;" do %>
        <i class="bi bi-hand-thumbs-up-fill"></i>
      <% end %>
    <% else %>
      <%= button_to task_likes_path(task), method: :post, class: "btn btn-primary", style: "height: 50px;" do %>
        <i class="bi bi-hand-thumbs-up"></i>
      <% end %>
    <% end %>
    <%= task.likes.count %>

    <%# link_to "詳細", task, class: "btn btn-secondary" %>
    <% if current_user == task.user %>
      <%= link_to "編集", edit_task_path(task), class: "btn btn-secondary" %>
      <turbo-frame id="${this.element.id}">
        <%= link_to "削除", task, class: "btn btn-secondary", data: {
                                                                    turbo_method: :delete,
                                                                    turbo_confirm: '本当に削除しますか？'
                                                                    }, style: "height: 50px;" %>
      </turbo-frame>
    <% end %>
  </div>
<% end %>
